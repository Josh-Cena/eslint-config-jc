"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[409],{8459:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>p,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var t=n(2685),l=(n(7378),n(5318));const r={sidebar_position:3},p="TypeScript",o={unversionedId:"typescript",id:"typescript",title:"TypeScript",description:"no-non-null-assertion",source:"@site/../docs/typescript.md",sourceDirName:".",slug:"/typescript",permalink:"/js-style-guide/typescript",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"defaultSidebar",previous:{title:"Modules",permalink:"/js-style-guide/eslint-base/modules"}},s={},c=[{value:"<code>no-non-null-assertion</code>",id:"no-non-null-assertion",level:4}],m={toc:c},i="wrapper";function d(e){let{components:a,...n}=e;return(0,l.kt)(i,(0,t.Z)({},m,n,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"typescript"},"TypeScript"),(0,l.kt)("h4",{id:"no-non-null-assertion"},(0,l.kt)("a",{parentName:"h4",href:"https://typescript-eslint.io/rules/no-non-null-assertion"},(0,l.kt)("inlineCode",{parentName:"a"},"no-non-null-assertion"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Severity: off")),(0,l.kt)("p",null,"This rule has been turned off despite being in ",(0,l.kt)("inlineCode",{parentName:"p"},"@typescript-eslint/recommended"),". There are a significant number of places where non-null assertions are inevitable:"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Weak built-in types")),(0,l.kt)("p",null,"Some TypeScript lib types are not accurate. One common example is regular expressions. The discussion is in ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/microsoft/TypeScript/issues/32098"},"microsoft/TypeScript#32098"),"."),(0,l.kt)("div",{className:"shiki-twoslash-fragment"},(0,l.kt)("pre",{parentName:"div",className:"shiki github-light twoslash lsp",style:{backgroundColor:"#ffffff",color:"#24292f"}},(0,l.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,l.kt)("div",{parentName:"pre",className:"code-container"},(0,l.kt)("code",{parentName:"div"},(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"const author: string | undefined"},"author")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:"const commit: string"},"commit"),"."),(0,l.kt)("span",{parentName:"div",style:{color:"#8250DF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(method) String.match(matcher: {\n    [Symbol.match](string: string): RegExpMatchArray | null;\n}): RegExpMatchArray | null (+1 overload)"},"match")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"("),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},"/(?<"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"name"),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},">"),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"."),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"+"),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},"),(?<"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"time"),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},">"),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"\\d"),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"+"),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},")/"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},")?.",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(property) RegExpMatchArray.groups?: {\n    [key: string]: string;\n} | undefined"},"groups"),".",(0,l.kt)("data-lsp",{parentName:"span",lsp:"string | undefined"},"name"),";")),(0,l.kt)("span",{parentName:"code",className:"error"},(0,l.kt)("span",{parentName:"span"},"Object is possibly 'undefined'."),(0,l.kt)("span",{parentName:"span",className:"code"},"2532")),(0,l.kt)("span",{parentName:"code",className:"error-behind"},"Object is possibly 'undefined'."),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#6E7781"}},"// But I know that `name` always exists in `groups`!"))))),(0,l.kt)("pre",{parentName:"div",className:"shiki github-dark twoslash lsp",style:{backgroundColor:"#0d1117",color:"#c9d1d9"}},(0,l.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,l.kt)("div",{parentName:"pre",className:"code-container"},(0,l.kt)("code",{parentName:"div"},(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"const author: string | undefined"},"author")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:"const commit: string"},"commit"),"."),(0,l.kt)("span",{parentName:"div",style:{color:"#D2A8FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(method) String.match(matcher: {\n    [Symbol.match](string: string): RegExpMatchArray | null;\n}): RegExpMatchArray | null (+1 overload)"},"match")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"("),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},"/(?<"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"name"),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},">"),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"."),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"+"),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},"),(?<"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"time"),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},">"),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"\\d"),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"+"),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},")/"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},")?.",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(property) RegExpMatchArray.groups?: {\n    [key: string]: string;\n} | undefined"},"groups"),".",(0,l.kt)("data-lsp",{parentName:"span",lsp:"string | undefined"},"name"),";")),(0,l.kt)("span",{parentName:"code",className:"error"},(0,l.kt)("span",{parentName:"span"},"Object is possibly 'undefined'."),(0,l.kt)("span",{parentName:"span",className:"code"},"2532")),(0,l.kt)("span",{parentName:"code",className:"error-behind"},"Object is possibly 'undefined'."),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#8B949E"}},"// But I know that `name` always exists in `groups`!")))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Control-flow analysis failure")),(0,l.kt)("p",null,"Control-flow analysis is not preserved across callback boundaries, because TypeScript cannot predict when a callback will be called. See ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/microsoft/TypeScript/issues/9998"},"microsoft/TypeScript#9998")),(0,l.kt)("div",{className:"shiki-twoslash-fragment"},(0,l.kt)("pre",{parentName:"div",className:"shiki github-light twoslash lsp",style:{backgroundColor:"#ffffff",color:"#24292f"}},(0,l.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,l.kt)("div",{parentName:"pre",className:"code-container"},(0,l.kt)("code",{parentName:"div"},(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"import"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(alias) function useRef<T>(initialValue: T): MutableRefObject<T> (+2 overloads)\nimport useRef"},"useRef")," } "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"from"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"react"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},";")),(0,l.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"function"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#8250DF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"function useDemo(): void"},"useDemo")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"() {")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"  "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"const ref: React.RefObject<(a: number) => void>"},"ref")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#8250DF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(alias) useRef<(a: number) => void>(initialValue: ((a: number) => void) | null): React.RefObject<(a: number) => void> (+2 overloads)\nimport useRef"},"useRef")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"<("),(0,l.kt)("span",{parentName:"div",style:{color:"#953800"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: number"},"a")),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},":"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"number"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},") "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"=>"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"void"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},">("),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"null"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},");")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"  "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"if"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," (",(0,l.kt)("data-lsp",{parentName:"span",lsp:"const ref: React.RefObject<(a: number) => void>"},"ref"),".",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(property) React.RefObject<(a: number) => void>.current: ((a: number) => void) | null"},"current"),") {")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"    "),(0,l.kt)("span",{parentName:"div",style:{color:"#6E7781"}},"// Do other stuff...")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"    ["),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"1"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},", "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"2"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},", "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},"3"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"]."),(0,l.kt)("span",{parentName:"div",style:{color:"#8250DF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(method) Array<number>.forEach(callbackfn: (value: number, index: number, array: number[]) => void, thisArg?: any): void"},"forEach")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"(("),(0,l.kt)("span",{parentName:"div",style:{color:"#953800"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: number"},"a")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},") "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"=>"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:"const ref: React.RefObject<(a: number) => void>"},"ref"),"."),(0,l.kt)("span",{parentName:"div",style:{color:"#8250DF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(property) React.RefObject<(a: number) => void>.current: ((a: number) => void) | null"},"current")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"(",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: number"},"a"),"));")),(0,l.kt)("span",{parentName:"code",className:"error"},(0,l.kt)("span",{parentName:"span"},"Cannot invoke an object which is possibly 'null'."),(0,l.kt)("span",{parentName:"span",className:"code"},"2721")),(0,l.kt)("span",{parentName:"code",className:"error-behind"},"Cannot invoke an object which is possibly 'null'."),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"    "),(0,l.kt)("span",{parentName:"div",style:{color:"#6E7781"}},"// But I just checked `ref.current`!")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"  }")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"}"))))),(0,l.kt)("pre",{parentName:"div",className:"shiki github-dark twoslash lsp",style:{backgroundColor:"#0d1117",color:"#c9d1d9"}},(0,l.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,l.kt)("div",{parentName:"pre",className:"code-container"},(0,l.kt)("code",{parentName:"div"},(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"import"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(alias) function useRef<T>(initialValue: T): MutableRefObject<T> (+2 overloads)\nimport useRef"},"useRef")," } "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"from"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"react"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},";")),(0,l.kt)("div",{parentName:"code",className:"line"},"\xa0"),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"function"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#D2A8FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"function useDemo(): void"},"useDemo")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"() {")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"  "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"const ref: React.RefObject<(a: number) => void>"},"ref")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#D2A8FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(alias) useRef<(a: number) => void>(initialValue: ((a: number) => void) | null): React.RefObject<(a: number) => void> (+2 overloads)\nimport useRef"},"useRef")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"<("),(0,l.kt)("span",{parentName:"div",style:{color:"#FFA657"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: number"},"a")),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},":"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"number"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},") "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"=>"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"void"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},">("),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"null"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},");")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"  "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"if"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," (",(0,l.kt)("data-lsp",{parentName:"span",lsp:"const ref: React.RefObject<(a: number) => void>"},"ref"),".",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(property) React.RefObject<(a: number) => void>.current: ((a: number) => void) | null"},"current"),") {")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"    "),(0,l.kt)("span",{parentName:"div",style:{color:"#8B949E"}},"// Do other stuff...")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"    ["),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"1"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},", "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"2"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},", "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},"3"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"]."),(0,l.kt)("span",{parentName:"div",style:{color:"#D2A8FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(method) Array<number>.forEach(callbackfn: (value: number, index: number, array: number[]) => void, thisArg?: any): void"},"forEach")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"(("),(0,l.kt)("span",{parentName:"div",style:{color:"#FFA657"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: number"},"a")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},") "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"=>"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:"const ref: React.RefObject<(a: number) => void>"},"ref"),"."),(0,l.kt)("span",{parentName:"div",style:{color:"#D2A8FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:"(property) React.RefObject<(a: number) => void>.current: ((a: number) => void) | null"},"current")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"(",(0,l.kt)("data-lsp",{parentName:"span",lsp:"(parameter) a: number"},"a"),"));")),(0,l.kt)("span",{parentName:"code",className:"error"},(0,l.kt)("span",{parentName:"span"},"Cannot invoke an object which is possibly 'null'."),(0,l.kt)("span",{parentName:"span",className:"code"},"2721")),(0,l.kt)("span",{parentName:"code",className:"error-behind"},"Cannot invoke an object which is possibly 'null'."),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"    "),(0,l.kt)("span",{parentName:"div",style:{color:"#8B949E"}},"// But I just checked `ref.current`!")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"  }")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"}")))))),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Clearer developer intention")),(0,l.kt)("p",null,"Sometimes, you are really sure that a value exists, but TypeScript doesn't believe you."),(0,l.kt)("div",{className:"shiki-twoslash-fragment"},(0,l.kt)("pre",{parentName:"div",className:"shiki github-light twoslash lsp",style:{backgroundColor:"#ffffff",color:"#24292f"}},(0,l.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,l.kt)("div",{parentName:"pre",className:"code-container"},(0,l.kt)("code",{parentName:"div"},(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'const managers: readonly [{\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n}, {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n}, {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}]'},"managers")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," [")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"  { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "npm"'},"name"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"npm"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},", ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "package-lock.json"'},"lockFile"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"package-lock.json"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," },")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"  { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "yarn"'},"name"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"yarn"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},", ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "yarn.lock"'},"lockFile"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"yarn.lock"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," },")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"  { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "pnpm"'},"name"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"pnpm"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},", ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "pnpm-lock.yaml"'},"lockFile"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"pnpm-lock.yaml"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," },")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"] "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"as"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'type const = readonly [{\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n}, {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n}, {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}]'},"const")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},";")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0550AE"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'const lockFile: "package-lock.json" | "yarn.lock" | "pnpm-lock.yaml"'},"lockFile")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'const managers: readonly [{\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n}, {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n}, {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}]'},"managers"),"."),(0,l.kt)("span",{parentName:"div",style:{color:"#8250DF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'(method) ReadonlyArray<{ readonly name: "npm"; readonly lockFile: "package-lock.json"; } | { readonly name: "yarn"; readonly lockFile: "yarn.lock"; } | { readonly name: "pnpm"; readonly lockFile: "pnpm-lock.yaml"; }>.find(predicate: (value: {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n} | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}, index: number, obj: readonly ({\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | ... 1 more ... | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n})[]) => unknown, thisArg?: any): {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | ... 2 more ... | undefined (+1 overload)'},"find")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},"(("),(0,l.kt)("span",{parentName:"div",style:{color:"#953800"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'(parameter) obj: {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n} | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}'},"obj")),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},") "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"=>"),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(parameter) obj: {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n} | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}'},"obj"),".",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "npm" | "yarn" | "pnpm"'},"name")," "),(0,l.kt)("span",{parentName:"div",style:{color:"#CF222E"}},"==="),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#0A3069"}},'"npm"'),(0,l.kt)("span",{parentName:"div",style:{color:"#24292F"}},").",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "package-lock.json" | "yarn.lock" | "pnpm-lock.yaml"'},"lockFile"),";")),(0,l.kt)("span",{parentName:"code",className:"error"},(0,l.kt)("span",{parentName:"span"},"Object is possibly 'undefined'."),(0,l.kt)("span",{parentName:"span",className:"code"},"2532")),(0,l.kt)("span",{parentName:"code",className:"error-behind"},"Object is possibly 'undefined'."),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#6E7781"}},"// It absolutely exists, but making it strongly typed is unnecessary trouble"))))),(0,l.kt)("pre",{parentName:"div",className:"shiki github-dark twoslash lsp",style:{backgroundColor:"#0d1117",color:"#c9d1d9"}},(0,l.kt)("div",{parentName:"pre",className:"language-id"},"ts"),(0,l.kt)("div",{parentName:"pre",className:"code-container"},(0,l.kt)("code",{parentName:"div"},(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'const managers: readonly [{\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n}, {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n}, {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}]'},"managers")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," [")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"  { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "npm"'},"name"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"npm"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},", ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "package-lock.json"'},"lockFile"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"package-lock.json"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," },")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"  { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "yarn"'},"name"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"yarn"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},", ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "yarn.lock"'},"lockFile"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"yarn.lock"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," },")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"  { ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "pnpm"'},"name"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"pnpm"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},", ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "pnpm-lock.yaml"'},"lockFile"),": "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"pnpm-lock.yaml"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," },")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"] "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"as"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'type const = readonly [{\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n}, {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n}, {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}]'},"const")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},";")),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"const"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#79C0FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'const lockFile: "package-lock.json" | "yarn.lock" | "pnpm-lock.yaml"'},"lockFile")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"="),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'const managers: readonly [{\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n}, {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n}, {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}]'},"managers"),"."),(0,l.kt)("span",{parentName:"div",style:{color:"#D2A8FF"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'(method) ReadonlyArray<{ readonly name: "npm"; readonly lockFile: "package-lock.json"; } | { readonly name: "yarn"; readonly lockFile: "yarn.lock"; } | { readonly name: "pnpm"; readonly lockFile: "pnpm-lock.yaml"; }>.find(predicate: (value: {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n} | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}, index: number, obj: readonly ({\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | ... 1 more ... | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n})[]) => unknown, thisArg?: any): {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | ... 2 more ... | undefined (+1 overload)'},"find")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},"(("),(0,l.kt)("span",{parentName:"div",style:{color:"#FFA657"}},(0,l.kt)("data-lsp",{parentName:"span",lsp:'(parameter) obj: {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n} | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}'},"obj")),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},") "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"=>"),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," ",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(parameter) obj: {\n    readonly name: "npm";\n    readonly lockFile: "package-lock.json";\n} | {\n    readonly name: "yarn";\n    readonly lockFile: "yarn.lock";\n} | {\n    readonly name: "pnpm";\n    readonly lockFile: "pnpm-lock.yaml";\n}'},"obj"),".",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) name: "npm" | "yarn" | "pnpm"'},"name")," "),(0,l.kt)("span",{parentName:"div",style:{color:"#FF7B72"}},"==="),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}}," "),(0,l.kt)("span",{parentName:"div",style:{color:"#A5D6FF"}},'"npm"'),(0,l.kt)("span",{parentName:"div",style:{color:"#C9D1D9"}},").",(0,l.kt)("data-lsp",{parentName:"span",lsp:'(property) lockFile: "package-lock.json" | "yarn.lock" | "pnpm-lock.yaml"'},"lockFile"),";")),(0,l.kt)("span",{parentName:"code",className:"error"},(0,l.kt)("span",{parentName:"span"},"Object is possibly 'undefined'."),(0,l.kt)("span",{parentName:"span",className:"code"},"2532")),(0,l.kt)("span",{parentName:"code",className:"error-behind"},"Object is possibly 'undefined'."),(0,l.kt)("div",{parentName:"code",className:"line"},(0,l.kt)("span",{parentName:"div",style:{color:"#8B949E"}},"// It absolutely exists, but making it strongly typed is unnecessary trouble")))))),(0,l.kt)("p",null,"This is also related to the previous two points in many cases, but in other cases where TypeScript cannot ensure existence with control-flow analysis, we need to convey developer intent through allowing ",(0,l.kt)("inlineCode",{parentName:"p"},"undefined")," or not."))}d.isMDXComponent=!0},5318:(e,a,n)=>{n.d(a,{Zo:()=>m,kt:()=>y});var t=n(7378);function l(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function p(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){l(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,l=function(e,a){if(null==e)return{};var n,t,l={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(l[n]=e[n]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=t.createContext({}),c=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):p(p({},a),e)),n},m=function(e){var a=c(e.components);return t.createElement(s.Provider,{value:a},e.children)},i="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},k=t.forwardRef((function(e,a){var n=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),i=c(n),k=l,y=i["".concat(s,".").concat(k)]||i[k]||d[k]||r;return n?t.createElement(y,p(p({ref:a},m),{},{components:n})):t.createElement(y,p({ref:a},m))}));function y(e,a){var n=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var r=n.length,p=new Array(r);p[0]=k;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o[i]="string"==typeof e?e:l,p[1]=o;for(var c=2;c<r;c++)p[c]=n[c];return t.createElement.apply(null,p)}return t.createElement.apply(null,n)}k.displayName="MDXCreateElement"}}]);